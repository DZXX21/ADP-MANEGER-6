<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lapsus - Leak Logs</title>
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0d1421 25%, #1a2332 50%, #0a1628 75%, #000511 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: linear-gradient(145deg, rgba(5, 15, 25, 0.95), rgba(10, 22, 40, 0.9));
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(30, 144, 255, 0.3);
            z-index: 1000;
            transition: transform 0.3s ease;
            box-shadow: 0 0 30px rgba(30, 144, 255, 0.15);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(30, 144, 255, 0.3);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e90ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 0 0 20px rgba(30, 144, 255, 0.6);
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: #87ceeb;
            margin-top: 0.25rem;
            font-weight: 500;
        }

        .sidebar-nav {
            padding: 1rem 0;
        }

        .nav-item {
            margin: 0.25rem 1rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            color: #6495ed;
            text-decoration: none;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.2), rgba(0, 100, 255, 0.15));
            color: #1e90ff;
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);
        }

        .nav-link.active {
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.25), rgba(0, 100, 255, 0.2));
            color: #1e90ff;
            border-left: 3px solid #1e90ff;
            box-shadow: 0 4px 20px rgba(30, 144, 255, 0.4);
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        /* Top Bar */
        .top-bar {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.9), rgba(10, 22, 40, 0.8));
            backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(30, 144, 255, 0.3);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(30, 144, 255, 0.15);
        }

        .top-bar-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.375rem;
            transition: color 0.2s ease;
        }

        .menu-toggle:hover {
            color: #1e90ff;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6495ed;
            font-size: 0.875rem;
        }

        .breadcrumb .active {
            color: #87ceeb;
            font-weight: 500;
            text-shadow: 0 0 10px rgba(135, 206, 235, 0.5);
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.2), rgba(0, 191, 255, 0.15));
            color: #00bfff;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid rgba(30, 144, 255, 0.3);
            box-shadow: 0 4px 15px rgba(30, 144, 255, 0.2);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #00bfff;
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.7);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Content Area */
        .content {
            padding: 2rem;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #1e90ff, #87ceeb, #4682b4);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            text-shadow: 0 0 30px rgba(30, 144, 255, 0.3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .page-subtitle {
            color: #6495ed;
            font-size: 1rem;
        }

        /* Stats Cards with Mini Charts */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.8), rgba(10, 22, 40, 0.6));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(30, 144, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(30, 144, 255, 0.2);
            border-color: rgba(30, 144, 255, 0.5);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e90ff;
            margin-bottom: 0.5rem;
            text-shadow: 0 0 20px rgba(30, 144, 255, 0.5);
        }

        .stat-label {
            color: #87ceeb;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .stat-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: rgba(30, 144, 255, 0.6);
            width: 24px;
            height: 24px;
        }

        /* Mini Charts */
        .mini-chart {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover .mini-chart {
            opacity: 1;
        }

        .mini-chart canvas {
            filter: drop-shadow(0 2px 4px rgba(30, 144, 255, 0.3));
        }

        /* Search and Filter Section */
        .search-section {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.8), rgba(10, 22, 40, 0.6));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(30, 144, 255, 0.1);
        }

        .search-row {
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .search-input-group {
            position: relative;
        }

        .search-input {
            width: 100%;
            background: rgba(10, 22, 40, 0.8);
            border: 1px solid rgba(30, 144, 255, 0.4);
            border-radius: 0.5rem;
            padding: 0.75rem 3rem 0.75rem 1rem;
            color: #ffffff;
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #1e90ff;
            box-shadow: 0 0 20px rgba(30, 144, 255, 0.3);
        }

        .search-input::placeholder {
            color: #6495ed;
        }

        .search-icon {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6495ed;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(10, 22, 40, 0.6);
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 0.5rem;
            padding: 0.5rem;
        }

        .pagination-controls select {
            background: rgba(5, 15, 25, 0.8);
            border: 1px solid rgba(30, 144, 255, 0.3);
            color: #ffffff;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }

        .action-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .btn {
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.2), rgba(0, 100, 255, 0.15));
            border: 1px solid rgba(30, 144, 255, 0.4);
            color: #1e90ff;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn:hover {
            background: linear-gradient(135deg, rgba(30, 144, 255, 0.3), rgba(0, 100, 255, 0.25));
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 144, 255, 0.3);
        }

        .btn-sm {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
        }

        /* Table Section */
        .table-section {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.8), rgba(10, 22, 40, 0.6));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(30, 144, 255, 0.1);
        }

        .table-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(30, 144, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-info {
            color: #6495ed;
            font-size: 0.875rem;
        }

        .table-container {
            max-height: 60vh;
            overflow-y: auto;
        }

        .log-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        .log-table th {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.9), rgba(10, 22, 40, 0.7));
            color: #87ceeb;
            padding: 1rem 0.75rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            border-bottom: 1px solid rgba(30, 144, 255, 0.3);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        /* Improved column widths */
        .log-table th:nth-child(1) { width: 12%; } /* Kanal */
        .log-table th:nth-child(2) { width: 10%; } /* Tip */
        .log-table th:nth-child(3) { width: 12%; } /* Kaynak */
        .log-table th:nth-child(4) { width: 35%; } /* İçerik - GENİŞLETİLDİ */
        .log-table th:nth-child(5) { width: 15%; } /* Tarih */
        .log-table th:nth-child(6) { width: 10%; } /* Yazar */
        .log-table th:nth-child(7) { width: 6%; }  /* İşlem */

        .log-table td {
            padding: 1rem 0.75rem;
            border-bottom: 1px solid rgba(30, 144, 255, 0.1);
            font-size: 0.875rem;
            vertical-align: top;
            word-wrap: break-word;
        }

        .log-row {
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .log-row:hover {
            background: rgba(30, 144, 255, 0.05);
            transform: translateX(2px);
        }

        /* Enhanced content preview */
        .content-preview {
            color: #87ceeb;
            cursor: pointer;
            line-height: 1.4;
            max-height: 4.2em; /* 3 satır için */
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            word-break: break-word;
            font-size: 0.8rem;
            background: rgba(10, 22, 40, 0.3);
            padding: 0.5rem;
            border-radius: 0.375rem;
            border-left: 3px solid rgba(30, 144, 255, 0.3);
            transition: all 0.2s ease;
        }

        .content-preview:hover {
            color: #1e90ff;
            background: rgba(30, 144, 255, 0.1);
            border-left-color: #1e90ff;
            box-shadow: 0 2px 8px rgba(30, 144, 255, 0.2);
        }

        .content-preview.expanded {
            max-height: none;
            -webkit-line-clamp: unset;
        }

        .expand-toggle {
            color: #1e90ff;
            font-size: 0.7rem;
            cursor: pointer;
            margin-top: 0.25rem;
            display: inline-block;
            text-decoration: underline;
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
            white-space: nowrap;
        }

        .badge-primary {
            background: rgba(30, 144, 255, 0.2);
            color: #1e90ff;
            border: 1px solid rgba(30, 144, 255, 0.3);
        }

        .badge-danger {
            background: rgba(220, 38, 127, 0.2);
            color: #dc2626;
            border: 1px solid rgba(220, 38, 127, 0.3);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .badge-secondary {
            background: rgba(100, 149, 237, 0.2);
            color: #6495ed;
            border: 1px solid rgba(100, 149, 237, 0.3);
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.6), rgba(10, 22, 40, 0.4));
            border-top: 1px solid rgba(30, 144, 255, 0.3);
        }

        .pagination-btn {
            background: rgba(30, 144, 255, 0.2);
            border: 1px solid rgba(30, 144, 255, 0.3);
            color: #1e90ff;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            min-width: 2.5rem;
            text-align: center;
        }

        .pagination-btn:hover:not(.disabled) {
            background: rgba(30, 144, 255, 0.3);
            transform: translateY(-1px);
        }

        .pagination-btn.active {
            background: linear-gradient(135deg, #1e90ff, #0066cc);
            color: white;
            border-color: #1e90ff;
        }

        .pagination-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            color: #6495ed;
            font-size: 0.875rem;
            margin: 0 1rem;
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: 3rem;
            color: #6495ed;
        }

        .loading i {
            animation: spin 1s linear infinite;
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* No results */
        .no-results {
            text-align: center;
            padding: 3rem;
            color: #6495ed;
        }

        .no-results i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }

            .content {
                padding: 1rem;
            }

            .page-title {
                font-size: 1.5rem;
            }

            .top-bar {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-row {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .log-table {
                font-size: 0.75rem;
            }

            .log-table th,
            .log-table td {
                padding: 0.5rem 0.25rem;
            }

            .content-preview {
                font-size: 0.7rem;
                max-height: 3em;
                -webkit-line-clamp: 2;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 22, 40, 0.3);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(30, 144, 255, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(30, 144, 255, 0.7);
        }

        /* Modal CSS */
        .modal {
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(5, 15, 25, 0.95), rgba(10, 22, 40, 0.9));
            border: 1px solid rgba(30, 144, 255, 0.3);
            border-radius: 1rem;
            width: 90%;
            max-width: 1000px;
            max-height: 80vh;
            margin: 5% auto;
            box-shadow: 0 20px 50px rgba(30, 144, 255, 0.2);
            overflow: hidden;
        }

        .modal-header {
            background: linear-gradient(135deg, #1e90ff, #0066cc);
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid rgba(30, 144, 255, 0.3);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.375rem;
            transition: background 0.2s ease;
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .detail-card {
            background: rgba(10, 22, 40, 0.6);
            border: 1px solid rgba(30, 144, 255, 0.2);
            border-radius: 0.75rem;
            padding: 1.5rem;
        }

        .detail-card h5 {
            color: #1e90ff;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-item {
            margin-bottom: 0.75rem;
        }

        .detail-label {
            color: #87ceeb;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .detail-value {
            color: #ffffff;
            font-size: 0.875rem;
        }

        .content-display {
            background: rgba(10, 22, 40, 0.8);
            border: 1px solid rgba(30, 144, 255, 0.2);
            border-radius: 0.5rem;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            color: #ffffff;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 2% auto;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>
                <i data-lucide="shield-check"></i>
                Lapsus
            </h1>
            <p>Dijital Varlık Yönetim Platformu</p>
        </div>
                 
        <nav class="sidebar-nav">
            <div class="nav-item">
                <a href="#" id="dashboardLink" class="nav-link active" onclick="switchPage('dashboard')">
                    <i data-lucide="layout-dashboard"></i>
                    Kontrol Paneli
                </a>
            </div>
            <div class="nav-item">
                <a href="/search" id="searchLink" class="nav-link" onclick="switchPage('search')">
                    <i data-lucide="search"></i>
                    Arama
                </a>
            </div>
            <div class="nav-item">
                <a href="/leak-logs" class="nav-link" onclick="switchPage('leak-logs')">
                    <i data-lucide="shield-alert"></i>
                    Leak Logs Search
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="toggleSubmenu(event, 'cve-submenu')">
                    <i data-lucide="alert-triangle"></i>
                    CVE Alert
                </a>
                <div id="cve-submenu" style="display: none; padding-left: 2.5rem;">
                    <a href="#" class="nav-link" onclick="switchPage('cve-search')">CVE Search</a>
                    <a href="#" class="nav-link" onclick="switchPage('cve-new')">CVE New</a>
                    <a href="#" class="nav-link" onclick="switchPage('cve-summary')">CVE Summary</a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="toggleSubmenu(event, 'ip-submenu')">
                    <i data-lucide="network"></i>
                    IP Search
                </a>
                <div id="ip-submenu" style="display: none; padding-left: 2.5rem;">
                    <a href="#" class="nav-link" onclick="switchPage('ip-search')">IP Search</a>
                    <a href="#" class="nav-link" onclick="switchPage('blacklist-ip')">Black List IP</a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="toggleSubmenu(event, 'pentest-submenu')">
                    <i data-lucide="bug"></i>
                    Web Pentest
                </a>
                <div id="pentest-submenu" style="display: none; padding-left: 2.5rem;">
                    <a href="#" class="nav-link" onclick="switchPage('web-pentest')">Web Pentest</a>
                    <a href="#" class="nav-link" onclick="switchPage('wordpress-pentest')">WordPress Pentest</a>
                </div>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="switchPage('domain-search')">
                    <i data-lucide="globe"></i>
                    Domain Search
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="switchPage('settings')">
                    <i data-lucide="settings"></i>
                    Ayarlar
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i data-lucide="menu"></i>
                </button>
                <div class="breadcrumb">
                    <span>Ana Sayfa</span>
                    <i data-lucide="chevron-right"></i>
                    <span class="active">Leak Logs</span>
                </div>
            </div>
            <div class="top-bar-right">
                <div class="status-indicator" id="statusIndicator">
                    <div class="status-dot"></div>
                    <span id="statusText">Canlı İzleme</span>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <div class="page-header fade-in">
                <h1 class="page-title">
                    <i data-lucide="shield-alert"></i>
                    Security Leak Logs
                </h1>
                <p class="page-subtitle">Gelişmiş sayfalama ve filtreli güvenlik log analizi</p>
            </div>

            <!-- Stats Grid with Mini Charts -->
            <div class="stats-grid fade-in">
                <div class="stat-card">
                    <div class="stat-value" id="totalLogs">0</div>
                    <div class="stat-label">Toplam Log</div>
                    <i data-lucide="database" class="stat-icon"></i>
                    <div class="mini-chart">
                        <canvas id="totalChart" width="50" height="30"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="uniqueSources">0</div>
                    <div class="stat-label">Benzersiz Kaynak</div>
                    <i data-lucide="globe" class="stat-icon"></i>
                    <div class="mini-chart">
                        <canvas id="sourceChart" width="60" height="60"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCategories">0</div>
                    <div class="stat-label">Kategori</div>
                    <i data-lucide="tag" class="stat-icon"></i>
                    <div class="mini-chart">
                        <canvas id="categoryChart" width="60" height="60"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="currentPage">1</div>
                    <div class="stat-label">Aktif Sayfa</div>
                    <i data-lucide="file" class="stat-icon"></i>
                    <div class="mini-chart">
                        <canvas id="timeChart" width="50" height="30"></canvas>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="search-section fade-in">
                <div class="search-row">
                    <div class="search-input-group">
                        <input type="text" class="search-input" id="searchInput" placeholder="Tüm logları ara (kanal, kaynak, içerik, yazar...)">
                        <i data-lucide="search" class="search-icon"></i>
                    </div>
                    <div class="pagination-controls">
                        <label style="color: #6495ed; font-size: 0.75rem;">Sayfa başına:</label>
                        <select id="pageSize" onchange="changePageSize()">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="action-buttons">
                        <button class="btn" onclick="exportData()">
                            <i data-lucide="download"></i>
                            Export
                        </button>
                        <button class="btn" onclick="refreshData()">
                            <i data-lucide="refresh-cw"></i>
                            Yenile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Table Section -->
            <div class="table-section fade-in">
                <div class="table-header">
                    <div class="table-info">
                        Gösterilen <span id="visibleCount">0</span> - <span id="visibleEnd">0</span> / <span id="totalCount">0</span> log
                    </div>
                    <div class="table-info">
                        Son güncelleme: <span id="lastUpdate"></span>
                    </div>
                </div>

                <div class="table-container">
                    <!-- Loading State -->
                    <div class="loading" id="loadingState">
                        <i data-lucide="loader"></i>
                        <p>Veriler yükleniyor...</p>
                    </div>

                    <!-- Table -->
                    <table class="log-table" id="dataTable" style="display: none;">
                        <thead>
                            <tr>
                                <th><i data-lucide="radio"></i> Kanal</th>
                                <th><i data-lucide="tag"></i> Tip</th>
                                <th><i data-lucide="map-pin"></i> Kaynak</th>
                                <th><i data-lucide="file-text"></i> İçerik Önizleme</th>
                                <th><i data-lucide="clock"></i> Tespit Tarihi</th>
                                <th><i data-lucide="user"></i> Yazar</th>
                                <th><i data-lucide="eye"></i> İşlem</th>
                            </tr>
                        </thead>
                        <tbody id="logTableBody">
                            <!-- Data will be loaded here -->
                        </tbody>
                    </table>

                    <!-- No Results Message -->
                    <div id="noResults" class="no-results" style="display: none;">
                        <i data-lucide="search-x"></i>
                        <h5>Log bulunamadı</h5>
                        <p>Arama kriterlerinizi ayarlamayı deneyin</p>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="paginationContainer">
                    <button class="pagination-btn" id="prevBtn" onclick="goToPage(currentPage - 1)">
                        <i data-lucide="chevron-left"></i>
                    </button>
                    
                    <div id="pageNumbers">
                        <!-- Page numbers will be generated here -->
                    </div>
                    
                    <button class="pagination-btn" id="nextBtn" onclick="goToPage(currentPage + 1)">
                        <i data-lucide="chevron-right"></i>
                    </button>
                    
                    <div class="pagination-info">
                        Sayfa <span id="currentPageDisplay">1</span> / <span id="totalPages">1</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal -->
    <div class="modal" id="logDetailModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h5><i data-lucide="info"></i> Log Detay Analizi</h5>
                <button class="close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="logDetailContent">
                <div style="text-align: center; padding: 2rem;">
                    <i data-lucide="loader" style="animation: spin 1s linear infinite;"></i>
                    <p style="margin-top: 1rem; color: #6495ed;">Detaylı bilgiler yükleniyor...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="copyToClipboard()">
                    <i data-lucide="copy"></i>
                    İçeriği Kopyala
                </button>
                <button class="btn btn-danger" onclick="closeModal()">
                    <i data-lucide="x"></i>
                    Kapat
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentPage = 1;
        let pageSize = 25;
        let totalPages = 1;
        let totalRecords = 0;
        let allData = [];
        let filteredData = [];
        let currentLogData = null;
        let searchTimeout = null;
        let miniCharts = {};

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Lapsus Leak Logs Dashboard yüklendi');
            lucide.createIcons();
            initializeMiniCharts();
            loadData();
            
            // Setup search with debounce
            document.getElementById('searchInput').addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    filterData();
                }, 300);
            });

            // Close modal when clicking outside
            window.onclick = function(event) {
                const modal = document.getElementById('logDetailModal');
                if (event.target == modal) {
                    closeModal();
                }
            }
        });

        // Initialize mini charts
        function initializeMiniCharts() {
            // Total logs trend chart (line)
            const totalCtx = document.getElementById('totalChart').getContext('2d');
            miniCharts.total = new Chart(totalCtx, {
                type: 'line',
                data: {
                    labels: ['', '', '', '', '', '', ''],
                    datasets: [{
                        data: [10, 25, 15, 40, 30, 55, 45],
                        borderColor: '#1e90ff',
                        backgroundColor: 'rgba(30, 144, 255, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    elements: {
                        point: { radius: 0 }
                    }
                }
            });

            // Sources pie chart
            const sourceCtx = document.getElementById('sourceChart').getContext('2d');
            miniCharts.source = new Chart(sourceCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Telegram', 'Discord', 'Web', 'Diğer'],
                    datasets: [{
                        data: [40, 30, 20, 10],
                        backgroundColor: [
                            '#1e90ff',
                            '#00bfff',
                            '#87ceeb',
                            '#4682b4'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    cutout: '60%'
                }
            });

            // Categories bar chart
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            miniCharts.category = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Kritik', 'Önemli', 'Genel'],
                    datasets: [{
                        data: [15, 35, 50],
                        backgroundColor: [
                            '#dc2626',
                            '#f59e0b',
                            '#1e90ff'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        tooltip: { enabled: false }
                    },
                    cutout: '60%'
                }
            });

            // Time distribution chart
            const timeCtx = document.getElementById('timeChart').getContext('2d');
            miniCharts.time = new Chart(timeCtx, {
                type: 'bar',
                data: {
                    labels: ['00', '06', '12', '18', '24'],
                    datasets: [{
                        data: [5, 15, 35, 25, 20],
                        backgroundColor: 'rgba(30, 144, 255, 0.6)',
                        borderColor: '#1e90ff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    }
                }
            });
        }

        // Load data from API
        async function loadData() {
            try {
                showLoading(true);
                
                const response = await fetch('/leak-logs/api/all');
                const data = await response.json();
                
                if (data.success) {
                    allData = data.results || [];
                    filteredData = [...allData];
                    totalRecords = allData.length;
                    
                    updateStats();
                    calculatePagination();
                    displayCurrentPage();
                    updateLastUpdate();
                } else {
                    throw new Error(data.error || 'Veri yüklenirken hata oluştu');
                }
            } catch (error) {
                console.error('Error loading data:', error);
                showError('Veriler yüklenirken hata: ' + error.message);
            } finally {
                showLoading(false);
            }
        }

        // Show/hide loading state
        function showLoading(show) {
            const loadingState = document.getElementById('loadingState');
            const dataTable = document.getElementById('dataTable');
            const paginationContainer = document.getElementById('paginationContainer');
            
            if (show) {
                loadingState.style.display = 'block';
                dataTable.style.display = 'none';
                paginationContainer.style.display = 'none';
            } else {
                loadingState.style.display = 'none';
                dataTable.style.display = 'table';
                paginationContainer.style.display = 'flex';
            }
        }

        // Update statistics with chart updates and timezone
        function updateStats() {
            document.getElementById('totalLogs').textContent = totalRecords;
            document.getElementById('uniqueSources').textContent = new Set(allData.map(item => item.source)).size;
            document.getElementById('totalCategories').textContent = new Set(allData.map(item => item.type)).size;
            document.getElementById('currentPage').textContent = currentPage;
            
            // Update status with timezone info
            updateStatusWithTimezone();
            
            // Update mini charts with real data
            updateMiniCharts();
        }

        // Update mini charts with real data
        function updateMiniCharts() {
            if (!allData.length || !miniCharts.source) return;

            try {
                // Update source distribution
                const sourceCounts = {};
                allData.forEach(item => {
                    const source = item.source || 'Bilinmiyor';
                    sourceCounts[source] = (sourceCounts[source] || 0) + 1;
                });
                
                const sortedSources = Object.entries(sourceCounts)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 4);
                
                miniCharts.source.data.labels = sortedSources.map(([name]) => name);
                miniCharts.source.data.datasets[0].data = sortedSources.map(([,count]) => count);
                miniCharts.source.update('none');

                // Update category distribution
                const categoryCounts = {};
                allData.forEach(item => {
                    const type = item.type || 'Genel';
                    categoryCounts[type] = (categoryCounts[type] || 0) + 1;
                });
                
                const sortedCategories = Object.entries(categoryCounts)
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 3);
                
                miniCharts.category.data.labels = sortedCategories.map(([name]) => name);
                miniCharts.category.data.datasets[0].data = sortedCategories.map(([,count]) => count);
                miniCharts.category.update('none');

                // Update total trend (simulate with recent data)
                const recentCounts = generateTrendData();
                miniCharts.total.data.datasets[0].data = recentCounts;
                miniCharts.total.update('none');

                // Update time distribution (simulate hourly data)
                const timeData = generateTimeDistribution();
                miniCharts.time.data.datasets[0].data = timeData;
                miniCharts.time.update('none');

            } catch (error) {
                console.warn('Chart update error:', error);
            }
        }

        // Generate trend data for total chart
        function generateTrendData() {
            const baseCount = Math.floor(totalRecords / 7);
            return Array.from({length: 7}, () => 
                baseCount + Math.floor(Math.random() * 20) - 10
            );
        }

        // Generate time distribution data
        function generateTimeDistribution() {
            return [
                Math.floor(totalRecords * 0.1), // 00-06
                Math.floor(totalRecords * 0.15), // 06-12
                Math.floor(totalRecords * 0.4),  // 12-18
                Math.floor(totalRecords * 0.25), // 18-00
                Math.floor(totalRecords * 0.1)   // 24
            ];
        }

        // Filter data based on search
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (searchTerm === '') {
                filteredData = [...allData];
            } else {
                filteredData = allData.filter(item => {
                    return Object.values(item).some(value => 
                        value && value.toString().toLowerCase().includes(searchTerm)
                    );
                });
            }
            
            currentPage = 1; // Reset to first page
            calculatePagination();
            displayCurrentPage();
        }

        // Calculate pagination
        function calculatePagination() {
            totalPages = Math.ceil(filteredData.length / pageSize);
            if (totalPages === 0) totalPages = 1;
            
            if (currentPage > totalPages) {
                currentPage = totalPages;
            }
        }

        // Display current page data
        function displayCurrentPage() {
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageData = filteredData.slice(startIndex, endIndex);
            
            const tbody = document.getElementById('logTableBody');
            const noResults = document.getElementById('noResults');
            
            if (pageData.length === 0) {
                tbody.innerHTML = '';
                noResults.style.display = 'block';
            } else {
                noResults.style.display = 'none';
                tbody.innerHTML = pageData.map(record => createTableRow(record)).join('');
            }
            
            updatePaginationInfo();
            updatePaginationButtons();
            lucide.createIcons();
        }

        // Create table row HTML
        function createTableRow(record) {
            const content = record.content || 'İçerik mevcut değil';
            const truncatedContent = content.length > 150 ? content.substring(0, 150) + '...' : content;
            
            return `
                <tr class="log-row" data-log-id="${record.id}">
                    <td>
                        <span class="badge badge-primary">
                            <i data-lucide="radio"></i>
                            ${record.channel || 'Bilinmiyor'}
                        </span>
                    </td>
                    <td>
                        ${getBadgeForType(record.type || 'Genel')}
                    </td>
                    <td>
                        <div style="color: #87ceeb; font-size: 0.875rem;">
                            <i data-lucide="globe"></i>
                            ${record.source || 'N/A'}
                        </div>
                    </td>
                    <td>
                        <div class="content-preview" onclick="showLogDetail(${record.id})" title="Detayları görüntülemek için tıklayın">
                            ${truncatedContent}
                            ${content.length > 150 ? '<div class="expand-toggle">Detayını gör...</div>' : ''}
                        </div>
                    </td>
                    <td>
                        <div style="color: #6495ed; font-size: 0.875rem;">
                            <i data-lucide="calendar"></i>
                            ${formatDate(record.detection_date)}
                        </div>
                    </td>
                    <td>
                        <div style="color: #87ceeb; font-size: 0.875rem;">
                            <i data-lucide="user-circle"></i>
                            ${record.author || 'Anonim'}
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-sm" onclick="showLogDetail(${record.id})" title="Detayları Görüntüle">
                            <i data-lucide="eye"></i>
                        </button>
                    </td>
                </tr>
            `;
        }

        // Get appropriate badge for log type
        function getBadgeForType(type) {
            if (type.toLowerCase().includes('kritik')) {
                return `<span class="badge badge-danger"><i data-lucide="alert-triangle"></i> ${type}</span>`;
            } else if (type.toLowerCase().includes('önemli')) {
                return `<span class="badge badge-warning"><i data-lucide="alert-circle"></i> ${type}</span>`;
            } else {
                return `<span class="badge badge-secondary"><i data-lucide="info"></i> ${type}</span>`;
            }
        }

        // 🔥 DÜZELTİLMİŞ formatDate fonksiyonu - SADECE BU VAR!
        function formatDate(dateString) {
            if (!dateString || dateString === 'Bilinmiyor') return 'Bilinmiyor';
            
            try {
                console.log('🔍 Formatlanacak tarih:', dateString); // Debug
                
                // MySQL datetime formatı kontrolü: 2025-06-29 20:50:47
                if (dateString.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)) {
                    const parts = dateString.split(' ');
                    const datePart = parts[0].split('-'); // [2025, 06, 29]
                    const timePart = parts[1]; // 20:50:47
                    
                    const formatted = `${datePart[2]}.${datePart[1]}.${datePart[0]} ${timePart}`;
                    console.log('✅ MySQL formatından çevrildi:', formatted); // Debug
                    return formatted;
                }
                
                // Eğer zaten formatlanmışsa (DD.MM.YYYY formatı), direkt döndür
                if (dateString.includes('.') && dateString.length > 10) {
                    console.log('✅ Zaten formatlanmış:', dateString); // Debug
                    return dateString;
                }
                
                // ISO string kontrolü: 2025-06-29T20:50:47Z
                if (dateString.includes('T')) {
                    const date = new Date(dateString);
                    if (!isNaN(date.getTime())) {
                        const formatted = date.toLocaleDateString('tr-TR') + ' ' + 
                               date.toLocaleTimeString('tr-TR', {
                                   hour: '2-digit', 
                                   minute: '2-digit', 
                                   second: '2-digit'
                               });
                        console.log('✅ ISO formatından çevrildi:', formatted); // Debug
                        return formatted;
                    }
                }
                
                // Fallback
                console.log('⚠️ Tarih formatı tanınmadı, orijinal döndürülüyor:', dateString);
                return dateString;
                
            } catch (error) {
                console.error('❌ Date formatting error:', error, 'for date:', dateString);
                return dateString;
            }
        }

        // 🔥 DÜZELTİLMİŞ getCurrentTime - Türkiye saati
        function getCurrentTime() {
            const now = new Date();
            
            // Türkiye saati için doğru timezone kullan
            const turkeyTime = now.toLocaleString('tr-TR', {
                timeZone: 'Europe/Istanbul',
                day: '2-digit',
                month: '2-digit', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            return turkeyTime;
        }

        // Update last update time
        function updateLastUpdate() {
            document.getElementById('lastUpdate').textContent = getCurrentTime();
        }

        // Timezone bilgisi
        function getTimezoneInfo() {
            return {
                timezone: 'Europe/Istanbul',
                offset: 'UTC+3',
                name: 'Türkiye Saati (TSI)',
                note: 'Veritabanı Türkiye saatinde saklanıyor'
            };
        }

        // Status'u timezone bilgisiyle güncelle
        function updateStatusWithTimezone() {
            const timezoneInfo = getTimezoneInfo();
            const statusText = document.getElementById('statusText');
            
            if (statusText) {
                statusText.innerHTML = `
                    ${totalRecords} Log Aktif
                    <small style="display: block; font-size: 0.7rem; opacity: 0.8;">
                        ${timezoneInfo.name} (${timezoneInfo.offset})
                    </small>
                `;
            }
        }

        // Update pagination info
        function updatePaginationInfo() {
            const startIndex = (currentPage - 1) * pageSize + 1;
            const endIndex = Math.min(currentPage * pageSize, filteredData.length);
            
            document.getElementById('visibleCount').textContent = startIndex;
            document.getElementById('visibleEnd').textContent = endIndex;
            document.getElementById('totalCount').textContent = filteredData.length;
            document.getElementById('currentPageDisplay').textContent = currentPage;
            document.getElementById('totalPages').textContent = totalPages;
        }

        // Update pagination buttons
        function updatePaginationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageNumbers = document.getElementById('pageNumbers');
            
            // Update prev/next buttons
            prevBtn.classList.toggle('disabled', currentPage === 1);
            nextBtn.classList.toggle('disabled', currentPage === totalPages);
            
            // Generate page numbers
            pageNumbers.innerHTML = generatePageNumbers();
        }

        // Generate page number buttons
        function generatePageNumbers() {
            let html = '';
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            // Adjust startPage if we're near the end
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // First page
            if (startPage > 1) {
                html += `<button class="pagination-btn" onclick="goToPage(1)">1</button>`;
                if (startPage > 2) {
                    html += `<span style="color: #6495ed; padding: 0.5rem;">...</span>`;
                }
            }
            
            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">${i}</button>`;
            }
            
            // Last page
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    html += `<span style="color: #6495ed; padding: 0.5rem;">...</span>`;
                }
                html += `<button class="pagination-btn" onclick="goToPage(${totalPages})">${totalPages}</button>`;
            }
            
            return html;
        }

        // Go to specific page
        function goToPage(page) {
            if (page < 1 || page > totalPages || page === currentPage) return;
            
            currentPage = page;
            displayCurrentPage();
            updateStats();
            
            // Scroll to top of table
            document.querySelector('.table-container').scrollTop = 0;
        }

        // Change page size
        function changePageSize() {
            pageSize = parseInt(document.getElementById('pageSize').value);
            currentPage = 1;
            calculatePagination();
            displayCurrentPage();
        }

        // Show log detail modal
        async function showLogDetail(logId) {
            document.getElementById('logDetailModal').style.display = 'block';
            
            try {
                const response = await fetch(`/leak-logs/api/detail/${logId}`);
                const data = await response.json();
                
                if (data.success) {
                    currentLogData = data.log;
                    const log = data.log;
                    const contentLength = log.content ? log.content.length : 0;
                    
                    const html = `
                        <div class="detail-grid">
                            <div class="detail-card">
                                <h5><i data-lucide="info"></i> Temel Bilgiler</h5>
                                <div class="detail-item">
                                    <div class="detail-label">ID</div>
                                    <div class="detail-value"><span class="badge badge-secondary">${log.id}</span></div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Kanal</div>
                                    <div class="detail-value"><span class="badge badge-primary">${log.channel}</span></div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Tip</div>
                                    <div class="detail-value">${getBadgeForType(log.type)}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Kaynak</div>
                                    <div class="detail-value">${log.source}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Yazar</div>
                                    <div class="detail-value">${log.author}</div>
                                </div>
                            </div>
                            <div class="detail-card">
                                <h5><i data-lucide="clock"></i> Zaman Bilgileri</h5>
                                <div class="detail-item">
                                    <div class="detail-label">Tespit Tarihi</div>
                                    <div class="detail-value"><code>${formatDate(log.detection_date)}</code></div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Oluşturulma</div>
                                    <div class="detail-value"><code>${formatDate(log.created_at)}</code></div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">İçerik Uzunluğu</div>
                                    <div class="detail-value"><span class="badge badge-primary">${contentLength} karakter</span></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-card">
                            <h5><i data-lucide="file-text"></i> Tam İçerik Analizi</h5>
                            <div class="content-display">${log.content || 'İçerik mevcut değil'}</div>
                        </div>
                    `;
                    
                    document.getElementById('logDetailContent').innerHTML = html;
                    lucide.createIcons();
                } else {
                    throw new Error(data.error || 'Log detayları yüklenemedi');
                }
            } catch (error) {
                document.getElementById('logDetailContent').innerHTML = `
                    <div style="background: rgba(220, 38, 127, 0.1); border: 1px solid rgba(220, 38, 127, 0.3); border-radius: 0.5rem; padding: 1rem; color: #dc2626;">
                        <i data-lucide="alert-triangle"></i> Log detayları yüklenirken hata: ${error.message}
                    </div>
                `;
                lucide.createIcons();
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('logDetailModal').style.display = 'none';
        }

        // Copy to clipboard
        function copyToClipboard() {
            if (currentLogData && currentLogData.content) {
                navigator.clipboard.writeText(currentLogData.content).then(() => {
                    alert('İçerik panoya kopyalandı!');
                });
            }
        }

        // Export data
        function exportData() {
            const dataToExport = filteredData.length > 0 ? filteredData : allData;
            const blob = new Blob([JSON.stringify(dataToExport, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `leak_logs_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Refresh data
        function refreshData() {
            currentPage = 1;
            document.getElementById('searchInput').value = '';
            loadData();
        }

        // Show error message
        function showError(message) {
            const tbody = document.getElementById('logTableBody');
            tbody.innerHTML = `
                <tr>
                    <td colspan="7" style="text-align: center; color: #dc2626; padding: 2rem;">
                        <i data-lucide="alert-triangle"></i>
                        <div style="margin-top: 0.5rem;">${message}</div>
                    </td>
                </tr>
            `;
            lucide.createIcons();
        }

        // Sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Page switching
        function switchPage(page) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            event.target.closest('.nav-link').classList.add('active');
            
            const breadcrumb = document.querySelector('.breadcrumb .active');
            const pageNames = {
                'dashboard': 'Kontrol Paneli',
                'analytics': 'Analitik', 
                'accounts': 'Hesaplar',
                'leak-logs': 'Leak Logs',
                'reports': 'Raporlar',
                'settings': 'Ayarlar'
            };
            breadcrumb.textContent = pageNames[page] || 'Leak Logs';
            
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
        }

        // Test fonksiyonu - konsola yazın: testDateFormat()
        function testDateFormat() {
            console.log('🧪 TEST başlıyor...');
            console.log('Test 1:', formatDate('2025-06-29 20:50:47')); // Beklenen: 29.06.2025 20:50:47
            console.log('Test 2:', formatDate('2025-06-29 06:30:15')); // Beklenen: 29.06.2025 06:30:15
            console.log('Test 3:', formatDate('2025-12-01 23:45:30')); // Beklenen: 01.12.2025 23:45:30
            console.log('Test 4:', formatDate('29.06.2025 20:50:47')); // Beklenen: 29.06.2025 20:50:47 (değişmez)
            console.log('Test 5:', formatDate('2025-06-29T20:50:47Z')); // Beklenen: 29.06.2025 saat
        }
    </script>
</body>
</html>